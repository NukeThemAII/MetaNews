# =============================================================================
# MetaNews Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Core Settings
# -----------------------------------------------------------------------------
NODE_ENV=production
TZ=UTC

# -----------------------------------------------------------------------------
# n8n Configuration
# -----------------------------------------------------------------------------
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=https

# Authentication
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=               # Strong password required

# Encryption (generate: openssl rand -hex 32)
N8N_ENCRYPTION_KEY=                    # 32-character hex string

# Execution settings
EXECUTIONS_MODE=queue
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168            # Hours to keep execution data

# Webhook URL (your public domain)
WEBHOOK_URL=https://n8n.yourdomain.com

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=metanews
DB_POSTGRESDB_USER=metanews
DB_POSTGRESDB_PASSWORD=                # Strong password required

# Connection string for Next.js
DATABASE_URL=postgresql://${DB_POSTGRESDB_USER}:${DB_POSTGRESDB_PASSWORD}@${DB_POSTGRESDB_HOST}:${DB_POSTGRESDB_PORT}/${DB_POSTGRESDB_DATABASE}

# -----------------------------------------------------------------------------
# Redis (Queue & Cache)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=                        # Optional but recommended
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}

# Queue settings
QUEUE_BULL_REDIS_HOST=${REDIS_HOST}
QUEUE_BULL_REDIS_PORT=${REDIS_PORT}
QUEUE_BULL_REDIS_PASSWORD=${REDIS_PASSWORD}

# -----------------------------------------------------------------------------
# AI / LLM APIs
# -----------------------------------------------------------------------------
# Google Gemini
GEMINI_API_KEY=                        # From Google AI Studio

# OpenAI (GPT-5.2)
OPENAI_API_KEY=                        # From OpenAI

# Anthropic (Claude - fallback)
ANTHROPIC_API_KEY=                     # Optional fallback

# -----------------------------------------------------------------------------
# Telegram Bot
# -----------------------------------------------------------------------------
TELEGRAM_BOT_TOKEN=                    # From @BotFather
TELEGRAM_CHAT_ID=                      # Premium alerts channel

# -----------------------------------------------------------------------------
# Payments (Stripe)
# -----------------------------------------------------------------------------
STRIPE_SECRET_KEY=                     # sk_live_xxx or sk_test_xxx
STRIPE_PUBLISHABLE_KEY=                # pk_live_xxx or pk_test_xxx
STRIPE_WEBHOOK_SECRET=                 # whsec_xxx

# Crypto payments (Coinbase Commerce)
COINBASE_API_KEY=
COINBASE_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# JWT for frontend auth (generate: openssl rand -base64 32)
JWT_SECRET=

# CORS (comma-separated allowed origins)
CORS_ORIGINS=https://metanews.app,https://www.metanews.app

# Rate limiting
RATE_LIMIT_WINDOW_MS=60000             # 1 minute
RATE_LIMIT_MAX_REQUESTS=100            # Per window

# -----------------------------------------------------------------------------
# External APIs (Data Sources)
# -----------------------------------------------------------------------------
# GDELT (free, no key needed)
GDELT_BASE_URL=https://api.gdeltproject.org

# SEC EDGAR (free, requires user-agent)
SEC_USER_AGENT=MetaNews/1.0 (contact@yourdomain.com)

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# Prometheus metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# Logging
LOG_LEVEL=info                         # debug, info, warn, error
LOG_OUTPUT=console                     # console, file

# Sentry (error tracking)
SENTRY_DSN=

# -----------------------------------------------------------------------------
# Frontend (Next.js)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_APP_URL=https://metanews.app
NEXT_PUBLIC_API_URL=https://api.metanews.app
NEXT_PUBLIC_WS_URL=wss://api.metanews.app

# Analytics
NEXT_PUBLIC_GA_ID=                     # Google Analytics
NEXT_PUBLIC_POSTHOG_KEY=               # PostHog
